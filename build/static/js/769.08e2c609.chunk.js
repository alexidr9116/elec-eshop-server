"use strict";(self.webpackChunkelectronic_e_shop_v1=self.webpackChunkelectronic_e_shop_v1||[]).push([[769],{5212:function(e,t,l){var n=l(1413),s=l(4925),a=l(2791),c=l(6907),i=l(184),r=["children","title","meta"],o=(0,a.forwardRef)((function(e,t){var l=e.children,a=e.title,o=void 0===a?"":a,d=(e.meta,(0,s.Z)(e,r));return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c.ql,{children:(0,i.jsx)("title",{children:"".concat(o," | electronic online shop")})}),(0,i.jsx)("div",(0,n.Z)((0,n.Z)({ref:t},d),{},{children:l})),(0,i.jsx)("div",{className:"h-16 w-full md:hidden "})]})}));t.Z=o},1769:function(e,t,l){l.r(t),l.d(t,{default:function(){return g}});var n=l(1413),s=l(3433),a=l(9439),c=l(2791),i=l(2711),r=l(9898),o=l(5212),d=l(9731),u=l(9120),f=l(937),m=l(5678),h=l(1134),x=l(184),v=function(e){var t=e.chat,l=e.user,n=t.sender===l.id;return(0,x.jsx)("div",{className:"flex p-2 ".concat(n?"":"justify-end","  w-full "),children:(0,x.jsxs)("div",{className:"rounded-lg ".concat(n?"bg-base-300 border-l-b-":"bg-violet-400"," p-2  flex flex-col items-end"),children:[(0,x.jsx)("p",{className:"w-full",children:t.message}),(0,x.jsx)("small",{className:"text-gray-700",children:(0,m.gC)(null===t||void 0===t?void 0:t.createdAt)})]})})};function g(){var e=(0,u.Z)().user,t=(0,c.useState)([]),l=(0,a.Z)(t,2),m=l[0],g=l[1],p=(0,c.useState)(),j=(0,a.Z)(p,2),b=j[0],w=j[1],N=(0,c.useMemo)((function(){return{file:null,message:""}}),[]),Z=(0,h.cI)(N),S=Z.register,_=Z.reset,k=Z.handleSubmit,y=(Z.setValue,Z.watch);Z.formState.isSubmitting,y("file");return(0,c.useEffect)((function(){var t=[],l=r.ZP.connect("".concat(d.J),{transports:["polling","websocket"]});l.on("connect",(function(){l.emit("logined",e)})),l.on("data-to-client",(function(e){var l=(0,s.Z)(t);l.push((0,n.Z)((0,n.Z)({},e),{},{createdAt:new Date})),t=l,g(l)})),w(l),(0,f.Hf)(f.$5.chat.getLogs).then((function(e){200===e.status&&(g(e.data),t=e.data)})).catch((function(e){}))}),[e]),(0,x.jsxs)(o.Z,{title:"Pubic Chat ",className:"flex flex-col w-full gap-2 sm:gap-4 ",children:[(0,x.jsx)("div",{className:"mt-32 w-full"}),(0,x.jsxs)("div",{className:"container flex flex-col w-full p-2",children:[(0,x.jsx)("div",{className:"w-full h-96 overflow-y-auto mb-4",children:(0,x.jsx)("div",{className:"w-full h-full flex flex-col gap-2",children:null===m||void 0===m?void 0:m.map((function(t,l){return(0,x.jsx)(v,{chat:t,user:e},l)}))})}),(0,x.jsxs)("form",{className:"flex w-full gap-1 items-end",onSubmit:k((function(t){var l=new FormData,n=t.file,s=t.message;if(l.append("message",s),l.append("file",n),b){var a={type:"text",sender:null===e||void 0===e?void 0:e.id,receiver:"all",message:s};b.emit("client-to-server",a),_()}})),children:[(0,x.jsx)("textarea",(0,n.Z)({className:"textarea textarea-bordered flex-1"},S("message"))),(0,x.jsx)("button",{className:"btn btn-sm p-0 btn-ghost btn-circle ",children:(0,x.jsx)(i.JO,{icon:"fa:telegram",width:24,className:"text-accent"})})]})]})]})}}}]);
//# sourceMappingURL=769.08e2c609.chunk.js.map