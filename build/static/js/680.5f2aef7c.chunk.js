"use strict";(self.webpackChunkelectronic_e_shop_v1=self.webpackChunkelectronic_e_shop_v1||[]).push([[680],{92:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(9439),s=n(2791),a=n(9434),l=n(184);function i(e){var t=e.minValue,n=void 0===t?0:t,i=e.maxValue,o=void 0===i?100:i,c=e.onChangeValue,u=e.defaultValue,d=void 0===u?0:u,f=(0,s.useState)(d),p=(0,r.Z)(f,2),h=p[0],m=p[1],x="light"===(0,a.v9)((function(e){return e.setting})).themeMode?"border-stone-300":"border-gray-800";return(0,s.useEffect)((function(){c&&c(h)}),[h,c]),(0,l.jsxs)("div",{className:"input-group  ",children:[(0,l.jsx)("button",{className:"btn btn-ghost ".concat(x," btn-square btn-sm md:btn-md"),onClick:function(){m(Math.max(0,h-1))},children:"-"}),(0,l.jsx)("input",{className:"input input-bordered border-l-0 border-r-0 w-16 text-right input-sm md:input-md",value:h,onChange:function(e){var t=parseInt(e.target.value);t>=n&&t<=o&&m(t)}}),(0,l.jsx)("button",{className:"btn  btn-ghost ".concat(x," btn-square  btn-sm md:btn-md"),onClick:function(){h<o&&m(Math.max(0,h+1))},children:"+"})]})}},1741:function(e,t,n){var r=n(1413),s=n(4925),a=n(2791),l=n(184),i=["children","title","onCancel","onSuccess"],o=(0,a.forwardRef)((function(e,t){var n=e.children,a=e.title,o=void 0===a?"":a,c=e.onCancel,u=(e.onSuccess,(0,s.Z)(e,i));return(0,l.jsxs)("div",(0,r.Z)((0,r.Z)({className:"modal modal-open bg-base-300/0 ",ref:t},u),{},{children:[(0,l.jsx)("div",{className:" fixed inset-0 bg-base-300/80",onClick:c}),(0,l.jsx)("div",{className:"z-50 bg-base-100 rounded-xl py-5 px-3 max-h-screen  overflow-y-auto",children:(0,l.jsxs)("div",{className:"flex flex-col gap-4 h-full",children:[(0,l.jsxs)("p",{className:"text-center font-bold text-xl mb-4",children:[o," "]}),n]})})]}))}));t.Z=o},5212:function(e,t,n){var r=n(1413),s=n(4925),a=n(2791),l=n(6907),i=n(184),o=["children","title","meta"],c=(0,a.forwardRef)((function(e,t){var n=e.children,a=e.title,c=void 0===a?"":a,u=(e.meta,(0,s.Z)(e,o));return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.ql,{children:(0,i.jsx)("title",{children:"".concat(c," | electronic online shop")})}),(0,i.jsx)("div",(0,r.Z)((0,r.Z)({ref:t},u),{},{children:n})),(0,i.jsx)("div",{className:"h-16 w-full md:hidden "})]})}));t.Z=c},1252:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(184);function s(){return(0,r.jsx)("div",{className:"animate-pulse grid w-full",children:(0,r.jsx)("div",{className:"grid gap-2",children:[1,2,3].map((function(e,t){return(0,r.jsxs)("div",{className:"flex gap-2 w-full items-center",children:[(0,r.jsxs)("div",{className:"flex gap-2 w-40",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-base-300"}),(0,r.jsxs)("div",{className:"flex flex-col w-24 justify-center",children:[(0,r.jsx)("label",{className:"w-24 h-6 bg-base-300 mb-2"}),(0,r.jsx)("label",{className:"w-18 h-6 bg-base-300"})]})]}),(0,r.jsx)("label",{className:"bg-base-300 w-1/4 h-6"}),(0,r.jsxs)("div",{className:"flex flex-col w-24 justify-center",children:[(0,r.jsx)("label",{className:"w-24 h-6 bg-base-300 mb-2"}),(0,r.jsx)("label",{className:"w-18 h-6 bg-base-300"})]}),(0,r.jsx)("label",{className:"bg-base-300 w-1/4 h-6"})]},t)}))})})}},3625:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(2791),s=n(9434);function a(){var e=(0,s.v9)((function(e){return e.setting})).language,t=(0,s.v9)((function(e){return e.shopping})).currencyRates;return(0,r.useMemo)((function(){return{currency:(null===e||void 0===e?void 0:e.currency)||"$",paypalCurrency:"en"===(null===e||void 0===e?void 0:e.key)?"USD":"ch"===(null===e||void 0===e?void 0:e.key)?"CNY":"MNT",time:"en"===(null===e||void 0===e?void 0:e.key)?1:"ch"===(null===e||void 0===e?void 0:e.key)?null===t||void 0===t?void 0:t.rmb:null===t||void 0===t?void 0:t.mnt}}),[e,t])}},6680:function(e,t,n){n.r(t),n.d(t,{default:function(){return M}});var r=n(7762),s=n(4165),a=n(5861),l=n(9439),i=n(2711),o=n(1105),c=n(2791),u=n(6140),d=n(9434),f=n(3504),p=n(5212),h=n(3625),m=n(3456),x=n(6871),v=n(5678),b=n(9120),y=n(5593),g=n(1741),j=n(937),w=n(8040),N=n(184);function k(e){var t,n,r,i,o,f,p,m,x=e.orderInfo,b=e.onCancel,k=e.billingAddress,Z=e.onSuccess,S=e.deliveryOption,C=e.children,O=(0,h.Z)(),_=(0,c.useState)(),P=(0,l.Z)(_,2),I=P[0],A=P[1],E=(0,c.useState)(parseFloat(x.total).toFixed(2)),B=(0,l.Z)(E,2),D=B[0],T=B[1],q=(0,c.useState)(!1),M=(0,l.Z)(q,2),F=M[0],L=M[1],R=(0,c.useState)({}),J=(0,l.Z)(R,2),W=J[0],z=J[1],U=(0,d.v9)((function(e){return e.basket})).carts,V=(0,c.useState)(!1),Q=(0,l.Z)(V,2),G=Q[0],$=Q[1],H=(0,c.useState)(!1),X=(0,l.Z)(H,2),K=X[0],Y=X[1],ee=function(){var e=(0,a.Z)((0,s.Z)().mark((function e(t,n){var r,a,l,i,o;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o={transactionId:t.id,carts:JSON.stringify(U),status:t.status,billingAddress:JSON.stringify(k),result:JSON.stringify(t),deliveryType:S,mode:"paypal",total:null===t||void 0===t||null===(r=t.purchase_units[0])||void 0===r||null===(a=r.amount)||void 0===a?void 0:a.value,currency:null===t||void 0===t||null===(l=t.purchase_units[0])||void 0===l||null===(i=l.amount)||void 0===i?void 0:i.currency_code},console.log(t),z(t),L(!0),A(null),(0,w.yj)(),(0,j.oh)(j.a1.putTransaction,o).then((function(e){$(!1)})).catch((function(e){$(!1)}));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return(0,c.useEffect)((function(){if(null!==O&&void 0!==O&&O.paypalCurrency){"MNT"===O.paypalCurrency&&T(parseFloat(x.total/O.time).toFixed(2));var e={"client-id":"AXvONryF1ICMccZSyU7Kq4-ZQyWMioIk3xAX897hGFRjPGzcmeq57VgiePwZw3JU8ArEmt6MjAZMBquY",currency:"MNT"===O.paypalCurrency?"USD":O.paypalCurrency,intent:"capture","data-client-token":"EMfV6WT3NEE9QvpIZ3DfSO3saZmyHgL21kHpc14_U_NnFZh69wytLx4FpmGgJIQBmp4nzTX7VWks1tk9"};A(e)}}),[O,x]),(0,N.jsx)(g.Z,{title:"Pay With PayPal",onCancel:F?Z:b,children:(0,N.jsxs)("div",{className:"flex flex-col gap-4 min-h-[400px]",children:[(0,N.jsx)("div",{className:"w-[340px] sm:w-[400px]",children:C}),F&&W&&(0,N.jsxs)("div",{className:"flex flex-col p-2 gap-2",children:[(0,N.jsxs)("h3",{className:"font-bold",children:["Status:",W.status,", Created: ",(0,v.gC)(new Date(W.create_time))]}),(0,N.jsxs)("div",{className:"flex justify-between w-full flex-col gap-4 border-b border-base-300 pb-2",children:[(0,N.jsxs)("label",{className:"text-stone-500",children:["Transaction ID:",null===W||void 0===W?void 0:W.id]}),(0,N.jsxs)("label",{className:"text-stone-500",children:["Payer:",null===W||void 0===W||null===(t=W.payer)||void 0===t?void 0:t.email_address]})]}),(null===W||void 0===W||null===(n=W.purchase_units)||void 0===n?void 0:n.length)>0&&(0,N.jsxs)("div",{className:"flex justify-between w-full flex-col gap-1",children:[(0,N.jsxs)("label",{className:"text-stone-500",children:["Amount:",null===W||void 0===W||null===(r=W.purchase_units[0])||void 0===r||null===(i=r.amount)||void 0===i?void 0:i.currency_code," ",(0,v.jn)(parseFloat(null===W||void 0===W||null===(o=W.purchase_units[0])||void 0===o||null===(f=o.amount)||void 0===f?void 0:f.value))]}),(0,N.jsxs)("label",{className:"text-stone-500",children:["Payee:",null===W||void 0===W||null===(p=W.purchase_units[0])||void 0===p||null===(m=p.payee)||void 0===m?void 0:m.email_address]})]})]}),!F&&null!==I&&(0,N.jsx)(y.q,{shippingPreference:"NO_SHIPPING",onError:function(e){u.ZP.error("Whoops!! payment error"),console.log(e)},amount:D,options:I,onSuccess:ee,onButtonReady:function(){Y(!0)}}),!K&&(0,N.jsxs)("div",{className:"w-full flex flex-col justify-center gap-2 p-8",children:[(0,N.jsx)("h3",{className:"text-base-300",children:"Loading PayPal Script"}),(0,N.jsx)("div",{className:"h-16 w-full animate-pulse bg-base-300"})]}),(0,N.jsx)("div",{className:"w-full flex justify-center",children:(0,N.jsx)("button",{className:"btn btn-ghost btn-sm h-10 px-10 ".concat(G?"loading":""),onClick:F?Z:b,children:"Close"})})]})})}function Z(e){var t=e.open,n=e.onClose,r=e.side,s=void 0===r?"left":r,a=e.children,l=e.className,o=S(s);return(0,N.jsxs)("div",{className:" overflow-x-hidden overflow-y-auto  inset-0 z-40 ".concat(t?"fixed":"hidden"," "),children:[(0,N.jsx)("div",{className:"opacity-80 fixed inset-0 bg-base-300",onClick:n}),(0,N.jsxs)("div",{className:"bg-base-100 absolute transition-all z-50 overflow-y-auto ".concat(o," ").concat(l),children:[(0,N.jsx)("button",{className:"btn btn-ghost absolute btn-circle top-2 right-2",onClick:n,children:(0,N.jsx)(i.JO,{icon:"ic:round-close",width:24,height:24})}),a]})]})}var S=function(e){var t="";return"left"===e?t="left-0 top-0 bottom-0 max-w-screen":"right"===e?t="right-0 top-0 bottom-0 max-w-screen":"top"===e?t="left-0 top-0 right-0 max-h-screen":"bottom"===e&&(t="left-0 right-0 bottom-0 max-h-screen"),t},C=[{key:"Free",title:"shopping.standard-delivery",desc:"shopping.standard-delivery-desc"},{key:"Fast",title:"shopping.fast-delivery",desc:"shopping.fast-delivery-desc"}],O=[{key:"Crypto",title:"shopping.crypto",desc:"shopping.crypto-desc",support:"global"},{key:"PayPal",title:"shopping.paypal",desc:"shopping.paypal-desc",support:"global"},{key:"QPay",title:"shopping.qpay",desc:"shopping.qpay-desc",support:"local"}],_=function(e){var t=e.orderInfo,n=e.deliveryOption,r=e.paymentOption;return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("label",{className:"text-lg font-bold mb-4",children:(0,o.t)("shopping.order-summary")}),(0,N.jsxs)("div",{className:"flex flex-col w-full gap-2 border-b border-base-300 pb-4",children:[(0,N.jsxs)("div",{className:"flex justify-between",children:[(0,N.jsx)("label",{className:"",children:(0,o.t)("shopping.sub-total")}),(0,N.jsx)("label",{className:"",children:(0,v.QB)(t.total,t.currency)})]}),(0,N.jsxs)("div",{className:"flex justify-between",children:[(0,N.jsx)("label",{className:"",children:(0,o.t)("shopping.shipping")}),(0,N.jsx)("label",{className:"",children:n})]}),(0,N.jsxs)("div",{className:"flex justify-between",children:[(0,N.jsx)("label",{className:"",children:(0,o.t)("shopping.payment-option")}),(0,N.jsx)("label",{className:"",children:r})]})]})]})};function P(e){var t,n=e.billingAddress,r=e.orderInfo,s=(0,b.Z)().user,a=(0,d.v9)((function(e){return e.setting})).language,i=(0,d.v9)((function(e){return e.basket})).carts,f=(0,c.useState)("Free"),p=(0,l.Z)(f,2),h=p[0],m=p[1],y=(0,c.useState)("Crypto"),g=(0,l.Z)(y,2),S=g[0],P=g[1],I=(0,c.useState)(!1),A=(0,l.Z)(I,2),E=A[0],B=A[1],D=(0,c.useState)(!1),T=(0,l.Z)(D,2),q=T[0],M=T[1],F=(0,c.useState)([]),L=(0,l.Z)(F,2),R=L[0],J=L[1],W=(0,c.useState)(""),z=(0,l.Z)(W,2),U=z[0],V=z[1],Q=(0,x.s0)();return(0,N.jsxs)("div",{className:"flex w-full flex-col sm:flex-row max-w-4xl gap-2 justify-between p-4",children:[(0,N.jsxs)("div",{className:"flex flex-col gap-8 flex-1",children:[(0,N.jsx)("label",{className:"font-bold",children:(0,o.t)("shopping.delivery-option")}),(0,N.jsx)("div",{className:"flex gap-2 w-full flex-col sm:flex-row justify-between mb-8",children:C.map((function(e,t){return(0,N.jsxs)("div",{onClick:function(){return m(e.key)},className:" bg-base-200 rounded-lg flex gap-4 p-4 items-center sm:w-1/2 cursor-pointer",children:[(0,N.jsx)("input",{onChange:function(){},checked:e.key===h,value:e.key,type:"radio",className:"radio radio-accent",name:"delivery-option"}),(0,N.jsxs)("div",{className:"flex-col flex ",children:[(0,N.jsx)("label",{className:"font-bold",children:(0,o.t)(e.title)}),(0,N.jsx)("label",{className:"text-sm",children:(0,o.t)(e.desc)})]})]},t)}))}),(0,N.jsx)("label",{className:"font-bold",children:(0,o.t)("shopping.payment-option")}),(0,N.jsx)("div",{className:"flex gap-2 w-full flex-col mb-4",children:O.map((function(e,t){return"global"===e.support||"local"===e.support&&"mn"===a.key?(0,N.jsxs)("div",{onClick:function(){return function(e){B(!1),P(e.key)}(e)},className:"bg-base-200 rounded-lg flex gap-4 p-4 items-center cursor-pointer",children:[(0,N.jsx)("input",{value:e.key,checked:e.key===S,onChange:function(){},type:"radio",className:"radio radio-accent",name:"payment-option"}),(0,N.jsxs)("div",{className:"flex-col flex",children:[(0,N.jsx)("label",{className:"font-bold",children:(0,o.t)(e.title)}),(0,N.jsx)("label",{className:"text-sm",children:(0,o.t)(e.desc)})]})]},t):null}))})]}),(0,N.jsxs)("div",{className:"flex flex-col gap-2 w-full sm:w-72 pl-2",children:[(0,N.jsx)("label",{className:"text-lg font-bold mb-4",children:(0,o.t)("shopping.billing-address")}),(0,N.jsxs)("label",{className:"",children:[null===n||void 0===n?void 0:n.fullName,"(",null===n||void 0===n?void 0:n.type,")"]}),(0,N.jsxs)("label",{className:"",children:[null===n||void 0===n?void 0:n.address,null===n||void 0===n||null===(t=n.pair)||void 0===t?void 0:t.value]}),(0,N.jsx)("label",{className:"",children:null===n||void 0===n?void 0:n.phoneNumber}),(0,N.jsx)("div",{className:"w-full border-b border-base-300 h-4 mb-12"}),(0,N.jsx)(_,{deliveryOption:h,orderInfo:r,paymentOption:S}),(0,N.jsxs)("div",{className:"flex justify-between mb-4",children:[(0,N.jsx)("label",{className:"",children:(0,o.t)("shopping.total")}),(0,N.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,N.jsx)("label",{className:"text-right",children:(0,v.QB)(r.total,r.currency)}),"free"!==h.toLocaleLowerCase()&&(0,N.jsx)("label",{className:"italic text-xs",children:"need money for shipping"})]})]}),(0,N.jsx)("div",{className:"flex w-full justify-center py-4",children:(0,N.jsx)("button",{onClick:function(){s&&null!==s&&void 0!==s&&s.active?(B(!0),"qpay"===S.toLowerCase()&&(0,j.DS)(j.a1.createQpayInvoice,{total:r.total}).then((function(e){if(200===e.status){J(e.data.qpay.urls),V(e.data.qpay.invoice_id);var t={transactionId:e.data.qpay.invoice_id,virtualInvoice:e.data.sender_invoice_no,carts:JSON.stringify(i),status:"PENDING",billingAddress:JSON.stringify(n),result:JSON.stringify(e.data.qpay),deliveryType:h,mode:"qpay",currency:"MNT",total:r.total};(0,j.oh)(j.a1.putTransaction,t).then((function(e){})).catch((function(e){console.log(e)}))}else u.ZP.error((null===e||void 0===e?void 0:e.message)||"Whoops! can not get qpay invoice data")})).catch((function(e){console.log(e)}))):Q("/auth/verify-email",{replace:!0})},className:"btn btn-accent text-white",disabled:q,children:(0,o.t)("shopping.complete-order")})})]}),E&&"paypal"===S.toLocaleLowerCase()&&(0,N.jsx)(k,{orderInfo:r,onSuccess:function(){B(!1),M(!0),Q("/shopping/orders",{replace:!0})},onCancel:function(){return B(!1)},billingAddress:n,deliveryOption:h,children:(0,N.jsx)(_,{deliveryOption:h,orderInfo:r,paymentOption:S})}),E&&"qpay"===S.toLocaleLowerCase()&&R.length>0&&(0,N.jsx)(Z,{onClose:function(){""!==U&&(B(!1),M(!0),u.ZP.success("Wait a moment, now checking transaction id ".concat(U)),setTimeout((function(){(0,j.Hf)("".concat(j.a1.getTransaction).concat(U)).then((function(e){200===e.status?(e.data&&"completed"===e.data.status.toLowerCase()?(0,w.yj)():M(!1),console.log(e.data)):M(!1),Q("/shopping/orders",{replace:!0})})).catch((function(e){console.log(e),M(!1),u.ZP.error("Whoops!, Intenal Server Error")}))}),2e3))},open:E,side:"bottom",className:"bg-base-100 p-8 h-2/3 ",children:R.map((function(e,t){return(0,N.jsxs)("div",{className:"flex gap-5 items-center mb-3 border-b border-base-300 cursor-pointer}",children:[(0,N.jsx)("div",{children:(0,N.jsx)("img",{alt:"logo",src:e.logo,width:50,height:50})}),(0,N.jsxs)("a",{className:"font-bold text-lg overflow-hidden text-ellipsis whitespace-nowrap",href:e.link,children:[(0,N.jsx)("label",{children:e.name}),(0,N.jsx)("br",{}),(0,N.jsx)("label",{className:"text-sm",children:e.description})]})]},t)}))})]})}var I=n(7087),A=n(92),E=n(2146),B=n(1252),D=n(3180),T=n(4333);function q(e){var t=e.carts,n=e.loading,r=e.t,s=e.baskets,a=e.handleChangeAmount,l=e.removeFromBasket,o=e.removeAllFromBasket,c=(0,h.Z)(),u=c.currency,d=c.time,f=(0,x.s0)();return(0,N.jsxs)("div",{className:"flex flex-col w-full p-4 gap-4 items-center",children:[(0,N.jsxs)("label",{className:"font-bold",children:[r("shopping.basket"),"(",null===t||void 0===t?void 0:t.reduce((function(e,t){return e+t.amount}),0)," ",r("words.items"),")"]}),0===t.length&&(0,N.jsxs)("div",{className:"w-full sm:w-3/4 flex flex-col gap-4 items-center",children:[(0,N.jsx)("img",{className:"w-full max-w-sm h-full",alt:"empty",src:"/assets/empty_cart.svg"}),(0,N.jsx)("label",{className:"text-lg",children:"No Product yet"})]}),n&&(0,N.jsx)(B.Z,{}),!n&&t.length>0&&(0,N.jsx)("div",{className:"w-full overflow-auto",children:(0,N.jsxs)("table",{className:"table w-full",children:[(0,N.jsx)("thead",{children:(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{children:r("shopping.product")}),(0,N.jsx)("td",{children:r("shopping.price")}),(0,N.jsx)("td",{children:r("shopping.amount")}),(0,N.jsx)("td",{children:r("shopping.total")}),(0,N.jsx)("td",{})]})}),(0,N.jsx)("tbody",{children:s.map((function(e,t){return(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{className:"cursor-pointer",children:(0,N.jsxs)("div",{className:"flex gap-2 w-56",onClick:function(){f("/product-detail/".concat(e.id),{replace:!0})},children:[(0,N.jsx)(I.LazyLoadImage,{src:"".concat((0,T.G)(null===e||void 0===e?void 0:e.image)),wrapperClassName:"w-20",effect:"blur",alt:"".concat(t)}),(0,N.jsxs)("div",{className:"flex flex-col w-36",children:[(0,N.jsx)(D.Z,{maxLine:1,text:null===e||void 0===e?void 0:e.title}),(0,N.jsx)(E.Z,{size:"sm",readOnly:!0,value:(0,T.S)(null===e||void 0===e?void 0:e.reviews)})]})]})}),(0,N.jsx)("td",{children:(0,v.QB)((null===e||void 0===e?void 0:e.price)*d,u)}),(0,N.jsxs)("td",{children:[(0,N.jsx)(A.Z,{defaultValue:e.basketAmount,maxValue:Math.max(0,e.quantity),onChangeValue:function(t){return a(t,e)}}),(0,N.jsxs)("label",{className:"text-xs",children:["available:",e.quantity]})]}),(0,N.jsx)("td",{className:"",children:(0,v.QB)((null===e||void 0===e?void 0:e.price)*d*(null===e||void 0===e?void 0:e.basketAmount),u)}),(0,N.jsx)("td",{children:(0,N.jsx)("button",{className:"btn btn-ghost p-0 btn-circle",onClick:function(){return l(e)},children:(0,N.jsx)(i.JO,{icon:"akar-icons:trash-can",width:20})})})]},t)}))}),(0,N.jsx)("tfoot",{children:(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{colSpan:3}),(0,N.jsx)("td",{className:"text-lg font-bold text-accent ",children:(0,v.QB)(s.reduce((function(e,t){return e+t.price*d*t.basketAmount}),0),u)}),(0,N.jsx)("td",{children:(0,N.jsx)("button",{className:"btn btn-ghost p-0 btn-circle",onClick:o,children:(0,N.jsx)(i.JO,{icon:"akar-icons:trash-can",width:20})})})]})})]})})]})}function M(){var e=(0,h.Z)(),t=e.currency,n=e.time,x=(0,d.v9)((function(e){return e.basket})).carts,v=(0,c.useState)([]),b=(0,l.Z)(v,2),y=b[0],g=b[1],k=(0,c.useState)(1),Z=(0,l.Z)(k,2),S=Z[0],C=Z[1],O=(0,c.useState)(!1),_=(0,l.Z)(O,2),I=_[0],A=_[1],E=(0,c.useState)({}),B=(0,l.Z)(E,2),D=B[0],T=B[1],M=(0,c.useState)([]),F=(0,l.Z)(M,2),L=F[0],R=F[1],J=(0,c.useState)({}),W=(0,l.Z)(J,2),z=W[0],U=W[1],V=function(){var e=(0,a.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g([]),e.next=3,(0,w.yj)();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=(0,a.Z)((0,s.Z)().mark((function e(t){var n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,j.yP)(j.$5.user.deleteBillingAddress,t);case 2:200===!(n=e.sent).status?u.ZP.error((null===n||void 0===n?void 0:n.message)||"Server Error"):R(L.splice(0,L.length).filter((function(e){return e.id!==t})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=(0,a.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(y.filter((function(e){return e.id!==t.id}))),e.next=3,(0,w.zl)(t.id);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,c.useEffect)((function(){if(2!==S){var e,t=[],n=(0,r.Z)(x);try{for(n.s();!(e=n.n()).done;){var s=e.value;t.push(s.id)}}catch(a){n.e(a)}finally{n.f()}t.length>0&&(A(!0),(0,j.DS)(j.$5.product.getProductsByIds,{ids:t}).then((function(e){if(200===e.status&&e.data){var t,n=[],s=(0,r.Z)(e.data);try{var l=function(){var e=t.value;e.basketAmount=Math.min(x.filter((function(t){return t.id===e.id}))[0].amount,Math.max(0,e.quantity)),n.push(e)};for(s.s();!(t=s.n()).done;)l()}catch(a){s.e(a)}finally{s.f()}g(n),(0,j.Hf)(j.$5.user.getBillingAddress).then((function(e){A(!1),200===e.status?R(e.data):u.ZP.error(e.message)})).catch((function(e){A(!1),console.log(e)}))}else A(!1)})).catch((function(e){A(!1)})))}}),[S]),(0,c.useEffect)((function(){if(x.length>0){var e,t=(0,r.Z)(y);try{var n=function(){var t=e.value;t.basketAmount=Math.min(x.filter((function(e){return e.id===t.id}))[0].amount,Math.max(0,t.quantity))};for(t.s();!(e=t.n()).done;)n()}catch(s){t.e(s)}finally{t.f()}}}),[y,x]),(0,c.useEffect)((function(){var e={price:y.reduce((function(e,t){return e+t.price*n*t.basketAmount}),0),currency:t,shippingPrice:0,total:0};e.total=e.price,U(e)}),[y,t,n]),(0,N.jsxs)(p.Z,{title:"Checkout",className:"flex flex-col w-full gap-2 sm:gap-4 ",children:[(0,N.jsx)("div",{className:"breadcrumbs  bg-base-300 absolute w-full left-0 px-6 overflow-x-hidden mt-24",children:(0,N.jsxs)("ul",{children:[(0,N.jsx)("li",{children:(0,N.jsx)(f.rU,{to:"/",children:(0,o.t)("words.home")})}),(0,N.jsx)("li",{children:(0,N.jsx)(f.rU,{to:"/shopping",children:(0,o.t)("words.shopping")})}),(0,N.jsx)("li",{children:(0,N.jsx)("label",{children:(0,o.t)("shopping.basket")})})]})}),(0,N.jsx)("div",{className:"mt-40 w-full"}),(0,N.jsx)("div",{className:"w-full flex justify-center container px-auto",children:(0,N.jsxs)("ul",{className:"steps sm:w-1/2",children:[(0,N.jsx)("li",{className:"step ".concat(S>=1?"step-info":""),"data-content":"".concat(1===S?"\u2715":"\u2713"),children:"Cart"}),(0,N.jsx)("li",{className:"step ".concat(S>=2?"step-info":""),"data-content":"".concat(S<=2?"\u2715":"\u2713"),children:"Billing & Address"}),(0,N.jsx)("li",{className:"step ".concat(S>=3?"step-info":""),"data-content":"".concat(S<=3?"\u2715":"\u2713"),children:"Payment"})]})}),1===S&&(0,N.jsx)(q,{baskets:y,carts:x,handleChangeAmount:function(e,t){t.basketAmount=e,(0,w.fm)({id:t.id,amount:e})},loading:I,t:o.t,removeAllFromBasket:V,removeFromBasket:G}),2===S&&(0,N.jsxs)("div",{className:"w-full flex justify-center flex-col items-center  py-4",children:[(0,N.jsx)(f.rU,{to:"/user/billing-address",className:"btn btn-ghost btn-sm btn-wide",children:"+Add New"}),(0,N.jsx)(m.Z,{onDelete:Q,onSelected:function(e){T(e),C(S+1)},BILLING_ADDRESS:L})]}),3===S&&(0,N.jsx)("div",{className:"w-full flex justify-center py-4",children:(0,N.jsx)(P,{billingAddress:D,orderInfo:z})}),(0,N.jsxs)("div",{className:"w-full flex justify-center mb-10 gap-8",children:[S>1&&(0,N.jsxs)(f.rU,{onClick:function(){return C(S-1)},to:"#",className:"hover:text-accent flex items-center",children:[(0,N.jsx)(i.JO,{width:20,icon:"eva:arrow-ios-back-outline"}),"\xa0",(0,o.t)("words.prev")]}),(0,N.jsxs)(f.rU,{to:"/shopping",className:"hover:text-accent flex items-center",children:[(0,N.jsx)(i.JO,{icon:"arcticons:amazon-shopping",width:20}),"\xa0",(0,o.t)("shopping.continue-shopping")]}),(null===x||void 0===x?void 0:x.length)>0&&1===S&&(0,N.jsxs)(f.rU,{onClick:function(){return C(S+1)},to:"#",className:"hover:text-accent flex items-center",children:[(0,o.t)("words.next"),"\xa0",(0,N.jsx)(i.JO,{width:20,icon:"ic:baseline-navigate-next"})]})]})]})}},3456:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(1105),s=n(184);function a(e){var t=e.onSelected,n=e.onDelete,a=e.BILLING_ADDRESS,l=void 0===a?[]:a;return(0,s.jsx)("div",{className:"flex flex-col max-w-xl w-full p-4 gap-4 ",children:l.map((function(e,a){return(0,s.jsxs)("div",{className:"flex flex-col gap-4 border-b border-base-300 pb-4",children:[(0,s.jsxs)("label",{className:"text-lg text-bold",children:[e.fullName,(0,s.jsxs)("span",{className:"text-sm text-accent",children:["(",e.type,")"]}),e.isDefault&&(0,s.jsx)("span",{className:"badge badge-sm badge-accent text-white ml-4",children:"Default"})]}),(0,s.jsxs)("label",{children:[e.address,"\xa0",e.town,"\xa0",e.zip]}),(0,s.jsxs)("div",{className:"flex justify-between w-full flex-col sm:flex-row",children:[(0,s.jsx)("label",{className:"mb-4",children:e.phoneNumber}),(0,s.jsxs)("div",{className:"flex gap-2",children:[!e.isDefault&&(0,s.jsx)("button",{className:"btn btn-sm btn-outline btn-ghost",onClick:function(){return n(e.id)},children:(0,r.t)("words.delete")}),t&&(0,s.jsx)("button",{onClick:function(){return t(e)},className:"btn btn-sm btn-outline btn-accent",children:(0,r.t)("shopping.delivery-address")})]})]})]},a)}))})}},8040:function(e,t,n){n.d(t,{DV:function(){return i},PM:function(){return f},fm:function(){return c},oz:function(){return u},yj:function(){return o},zl:function(){return d}});var r=n(4165),s=n(5861),a=n(3826),l=n(7566),i=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,l.WI)((0,a.V1)());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,l.WI)((0,a.RT)());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),c=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,l.WI)((0,a.L)(t)),e.abrupt("return",!0);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,l.WI)((0,a.wB)(t)),e.abrupt("return",!0);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,l.WI)((0,a.Er)(t)),e.abrupt("return",!0);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,l.WI)((0,a.QJ)(t)),e.abrupt("return",!0);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},4333:function(e,t,n){n.d(t,{G:function(){return s},S:function(){return a}});var r=n(937);function s(e){try{var t=JSON.parse(e)[0].name.replace("products/","");return"".concat(r.S$.ezo).concat(t)}catch(n){return console.log(n),"".concat(r.S$.image,"product.jpg")}}function a(e){return(null===e||void 0===e?void 0:e.reduce((function(e,t){return e+t.rating}),0))/(null===e||void 0===e?void 0:e.length)}},5593:function(e,t,n){t.q=void 0;var r=l(n(2791)),s=l(n(4164)),a=l(n(2007));function l(e){return e&&e.__esModule?e:{default:e}}function i(e){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return!t||"object"!==i(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=u(this,d(t).call(this,e))).state={isSdkReady:!1},n}var n,a,l;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,e),n=t,(a=[{key:"componentDidMount",value:function(){"undefined"!==typeof window&&void 0!==window&&void 0===window.paypal?this.addPaypalSdk():"undefined"!==typeof window&&void 0!==window&&void 0!==window.paypal&&this.props.onButtonReady&&this.props.onButtonReady()}},{key:"createOrder",value:function(e,t){var n=this.props,r=n.currency,s=n.options,a=n.amount,l=n.shippingPreference;return t.order.create({purchase_units:[{amount:{currency_code:r||(s&&s.currency?s.currency:"USD"),value:a.toString()}}],application_context:{shipping_preference:l}})}},{key:"onApprove",value:function(e,t){var n=this;return t.order.capture().then((function(t){if(n.props.onSuccess)return n.props.onSuccess(t,e)})).catch((function(e){if(n.props.catchError)return n.props.catchError(e)}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.amount,a=t.onSuccess,l=t.createOrder,i=t.createSubscription,c=t.onApprove,u=t.style;if(!this.state.isSdkReady&&("undefined"===typeof window||void 0===window.paypal))return null;var d=window.paypal.Buttons.driver("react",{React:r.default,ReactDOM:s.default}),f=n&&!l?function(t,n){return e.createOrder(t,n)}:function(e,t){return l(e,t)};return r.default.createElement(d,o({},this.props,{createOrder:i?void 0:f,createSubscription:i,onApprove:a?function(t,n){return e.onApprove(t,n)}:function(e,t){return c(e,t)},style:u}))}},{key:"addPaypalSdk",value:function(){var e=this,t=this.props,n=t.options,r=t.onButtonReady,s=[];Object.keys(n).forEach((function(e){var t=e.split(/(?=[A-Z])/).join("-").toLowerCase();s.push("".concat(t,"=").concat(n[e]))}));var a=document.createElement("script");a.type="text/javascript",a.src="https://www.paypal.com/sdk/js?".concat(s.join("&")),a.async=!0,a.onload=function(){e.setState({isSdkReady:!0}),r&&r()},a.onerror=function(){throw new Error("Paypal SDK could not be loaded.")},document.body.appendChild(a)}}])&&c(n.prototype,a),l&&c(n,l),t}(r.default.Component);t.q=h,p(h,"propTypes",{amount:a.default.oneOfType([a.default.number,a.default.string]),currency:a.default.oneOfType([a.default.number,a.default.string]),shippingPreference:a.default.string,onSuccess:a.default.func,catchError:a.default.func,onError:a.default.func,createOrder:a.default.func,createSubscription:a.default.func,onApprove:a.default.func,style:a.default.object,options:a.default.shape({clientId:a.default.string,merchantId:a.default.string,currency:a.default.oneOfType([a.default.number,a.default.string]),intent:a.default.string,commit:a.default.oneOfType([a.default.bool,a.default.string]),vault:a.default.oneOfType([a.default.bool,a.default.string]),component:a.default.string,disableFunding:a.default.string,disableCard:a.default.string,integrationDate:a.default.string,locale:a.default.string,buyerCountry:a.default.string,debug:a.default.oneOfType([a.default.bool,a.default.string])}),onButtonReady:a.default.func}),p(h,"defaultProps",{style:{},options:{clientId:"sb",currency:"USD"},shippingPreference:"GET_FROM_FILE"})}}]);
//# sourceMappingURL=680.5f2aef7c.chunk.js.map